@mixin flex-align-center {
  display: flex;
  align-items: center;
}

@mixin d-none-absolute {
  display: none;
  position: absolute;
}

@mixin checkmark-disabled-colors-states {
  &.error {
    color: var(--error-red-300);
  }
}

@mixin checkmark-colors-states {
  &.error {
    color: var(--error-red-500);
  }
}

.label-wrapper {
  label {
    @include flex-align-center;
    padding: 6px; // для большей области клика
    column-gap: 12px;
    cursor: pointer;
    width: fit-content;

    .input-wrapper {
      @include flex-align-center;
      position: relative;
      z-index: 0;
      width: 18px;
      height: 18px;

      .checkbox {
        appearance: none;
        -webkit-appearance: none;
        margin: 0;
        background-color: transparent;
        border: 2px solid var(--ac-checkbox-unchecked-normal-stroke);
        border-radius: var(--2-radius);
        width: 100%;
        height: 100%;
        cursor: pointer;

        // input :hover states
        &:hover:enabled {
          ~ .hover-circle {
            display: block;
          }

          &.error {
            border-color: var(--ac-checkbox-unchecked-error-stroke);
            ~ .hover-circle {
              opacity: 1;
              background-color: var(--ac-checkbox-unchecked-error-fill);
            }
          }
        }

        // input :checked states
        &:checked {
          border: none;
          background-color: var(--ac-checkbox-checked-bg);
          height: var(--16-size);
          width: var(--16-size);
          -webkit-appearance: none;

          ~ .checkmark {
            display: inline-flex;
            left: -2px;
            top: -1px;

            &:hover:enabled ~ .hover-circle {
              cursor: pointer;
              display: block;
              background-color: var(--primary-blue-50);
            }
          }

          ~ .checkmark-multiple {
            display: inline-flex;
            left: -3px;
            top: -3px;

            &:hover:enabled ~ .hover-circle {
              display: block;
            }
          }

          // input :checked + :disabled
          &:disabled {
            ~ .checkmark {
              cursor: default;
              color: var(--ac-checkbox-checked-disabled);
            }
          }

          // input :hover + :checked states
          &:hover:enabled {
            ~ .checkmark {
              color: var(--primary-blue-600);
              &.error {
                color: var(--error-red-600);
              }

              + .hover-circle {
              
                &.error {
                  background-color: var(--error-red-200);
                }
              }
            }

            ~ .checkmark-multiple {
              color: var(--text-grey-500);
            }
          }
        }

        // input :disabled
        &:disabled {
          cursor: default;
          border-color: var(--ac-checkbox-unchecked-disabled-stroke);
          background-color: var(--ac-checkbox-unchecked-disabled-fill);

          &.error {
            background-color: var(--error-red-200);
          }

          ~ .checkmark,
          ~ .checkmark-multiple {
            @include checkmark-disabled-colors-states;
          }

          ~ .checkmark-multiple {
            cursor: default;
            color: var(--ac-checkbox-checked-disabled);
          }

          .text {
            color: var(--text-grey-500);
          }
        }

        &.error {
          border-color: var(--ac-checkbox-unchecked-error-stroke);
        }
      }

      .hover-circle {
        @include d-none-absolute;
        width: var(--32-size);
        height: var(--32-size);
        border-radius: 50%;
        opacity: var(--8-opacity);
        background-color: var(--ac-checkbox-unchecked-focused-focus);
        z-index: -1;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }

      .hover-circle-checked {
        background-color: var(--ac-checkbox-checked-focused);
      }

      // default color states for checkmarks
      .checkmark,
      .checkmark-multiple {
        @include d-none-absolute;
        @include checkmark-colors-states;
      }

      .checkmark.default {
        color: var(--ac-checkbox-checked-normal);
      }

      .checkmark-multiple.default {
        color: var(--text-grey-400);
      }
    }

    .text {
      color: var(--text-grey-900);
      line-height: var(--line-heights-4);
      font-weight: 500;

      &.disabled {
        color: var(--text-grey-500);
      }
    }
  }
}
